{% extends "govuk/template.njk" %}

{% from "govuk/components/back-link/macro.njk" import govukBackLink %}
{% from "govuk/components/error-summary/macro.njk" import govukErrorSummary %}
{% from "govuk/components/notification-banner/macro.njk" import govukNotificationBanner %}
{% from "views/layouts/components/header.njk" import header %}

{% block head %}
	{# setup the header tags, to link to the styles #}
	<link rel="stylesheet" href="/{{ config.styleFile }}"/>
	<link rel="stylesheet" href="/assets/css/accessible-autocomplete.min.css"/>
	<script type="text/javascript" src="/assets/js/accessible-autocomplete.min.js"></script>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr@4.6.13/dist/flatpickr.min.css">
	<script src="https://cdn.jsdelivr.net/npm/flatpickr@4.6.13/dist/flatpickr.min.js"></script>

{% endblock %}

{% block pageTitle %}
	{% if pageTitle %}
		{{ pageTitle }} - {{ serviceName | default(config.headerTitle) }}
	{% else %}
		{{ serviceName | default(config.headerTitle) }}
	{% endif %}
{% endblock %}

{% block header %}
	{{ header(config.headerTitle) }}
{% endblock %}

{% block beforeContent %}
	<script {% if cspNonce %}nonce={{ cspNonce }}{% endif %}>
		document.body.className += ' js-enabled' + ('noModule' in HTMLScriptElement.prototype ? ' govuk-frontend-supported' : '');
	</script>
	{% block backLink %}
		{% if backLinkUrl and backLinkText %}
			{{ govukBackLink({ text: backLinkText, href: backLinkUrl }) }}
		{% elseif backLinkUrl %}
			{{ govukBackLink({ href: backLinkUrl }) }}
		{% elseif backLink %} {# used by the dynamic forms #}
			{{ govukBackLink({ href: backLink }) }}
		{% endif %}
	{% endblock %}
	{% block error_summary %}
		{% if errorSummary and errorSummary.length != 0 %}
			<div class="govuk-grid-row">
				<div class="govuk-grid-column-two-thirds">
					{{
					govukErrorSummary({
						titleText: "There is a problem",
						errorList: errorSummary
					})
					}}
				</div>
			</div>
		{% endif %}
	{% endblock %}
	{% block success_summary %}
		{% if successSummary %}
			{% set html %}
				<h3 class="govuk-notification-banner__heading">{{successSummary.heading}}</h3>
				<p class="govuk-body">{{successSummary.body}}</p>
			{% endset %}

			{{ govukNotificationBanner({
				html: html,
				type: "success"
			}) }}
		{% endif %}
	{% endblock %}
{% endblock %}

	{% block before_content %}{% endblock %}

	{% block content %}
		{% block pageHeading %}
			<div class="govuk-grid-row centered-page-title">
				<div class="govuk-grid-column-full">
					<h1 class="govuk-heading-l">
						{% if pageCaption %}
							<span class="govuk-caption-xl">{{ pageCaption }}</span>
						{% endif %}
						{{ pageHeading or pageTitle }}
					</h1>
				</div>
			</div>
		{% endblock %}
		{% block pageContent %}{% endblock %}

		{% block after_content %}{% endblock %}
	{% endblock %}

{% block footer %}
	<footer class="govuk-footer" role="contentinfo">
		<div class="govuk-width-container ">
			<div class="govuk-footer__meta">
				<div class="govuk-footer__meta-item govuk-footer__meta-item">
					<!-- footer container -->
				</div>
			</div>
		</div>
	</footer>

	<script type="module" {% if cspNonce %}nonce={{ cspNonce }}{% endif %} src="/assets/js/govuk-frontend.min.js"></script>
	<script type="module" {% if cspNonce %}nonce={{ cspNonce }}{% endif %}>
		import { initAll } from '/assets/js/govuk-frontend.min.js'
		initAll()
	</script>
{% endblock %}
